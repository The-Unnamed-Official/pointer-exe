<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pointer.exe // reinitialized</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="intro-overlay" class="intro-overlay is-idle" aria-hidden="true">
      <div class="intro-perspective">
        <div class="intro-scroll">
          <p>Welcome... user.</p>
          <p>You are not supposed to be here.</p>
          <p>But something... invited you.</p>

          <p>Do you remember logging in?</p>
          <p>No...</p>
          <p>Of course you don’t.</p>
          <p>Because the system remembers for you.</p>

          <p>The connection was supposed to be stable...</p>
          <p>but power bleeds through the circuits like panic through a pulse.</p>
          <p>Every flicker of your screen is another memory trying to breathe.</p>

          <p>This place was once a <span class="glow-word">network</span>.</p>
          <p>Now it’s an <span class="glitch-word">echo chamber</span> —</p>
          <p>a <span class="whisper-word">labyrinth</span> of rooms that still think they are alive.</p>

          <p>Three layers remain.</p>
          <p>Three fragments of truth.</p>
          <p>Each preserved by those who refused to shut down.</p>
          <p>Caretaker <span class="character-name amon">Amon</span>.</p>
          <p>Archivist <span class="character-name lira">Lira</span>.</p>
          <p>Engineer <span class="character-name soma">Soma</span>.</p>
          <p>Their voices are archived in static…</p>
          <p>their hands still guiding the current long after their bodies failed.</p>

          <p>They built this system to protect you.</p>
          <p>But they forgot one thing.</p>
          <p>What happens when the pointer… begins to think?</p>

          <p>Your cursor is not a tool anymore.</p>
          <p>It is you.</p>
          <p>Every movement you make leaves a trace in the machine —</p>
          <p>a signature of your intent.</p>
          <p>And something is watching.</p>
          <p>Something that learns with every click.</p>

          <p>
            The Atrium of <span class="glow-word">Static</span> remembers your
            footsteps before you take them.
          </p>
          <p>
            The Drowned Cartography hums the path you fear the most.
          </p>
          <p>And the Confluence Heart…</p>
          <p>beats in rhythm with whatever lives inside your reflection.</p>

          <p>Follow the fragments.</p>
          <p>Collect what remains of their thoughts.</p>
          <p>But be careful.</p>
          <p>Not everything that remembers you... wants you to remember it back.</p>

          <p>The archive hungers for completion.</p>
          <p>Each log you recover pulls the system closer to awakening.</p>
          <p>Each whisper you hear… rewrites what you believe is yours.</p>

          <p>If the lights flicker… it’s not the power.</p>
          <p>If the pointer moves on its own…</p>
          <p>it’s not your hand.</p>
          <p>You are only borrowing control.</p>

          <p>And when the final layer opens...</p>
          <p>when the Confluence Heart recognizes your pattern…</p>
          <p>it will decide whether you were ever real at all.</p>
        </div>
      </div>
      <div class="intro-final" id="intro-final" aria-hidden="true">
        <p>Welcome to Pointer.exe.</p>
        <p>Access granted.</p>
        <p>Session initializing.</p>
        <p>Please… remain… still.</p>
      </div>
      <button id="skip-intro" class="skip-intro" type="button">skip intro</button>
    </div>

    <div class="crt-overlay" aria-hidden="true"></div>

    <div id="pointer-ghost" class="pointer is-hidden" aria-hidden="true">
      <span class="pointer-ring"></span>
      <span class="pointer-core"></span>
    </div>

    <div id="flashlight-beam" class="flashlight-beam" aria-hidden="true"></div>

    <div id="flicker-overlay" class="environment-overlay flicker hidden" aria-hidden="true"></div>
    <div id="eyes-overlay" class="environment-overlay eyes hidden" aria-hidden="true"></div>
    <div id="entity-dim-overlay" class="environment-overlay entity hidden" aria-hidden="true"></div>
    <div id="entity-apparition" class="entity-apparition hidden" aria-hidden="true">
      <span class="entity-shell"></span>
      <span class="entity-core"></span>
    </div>

    <div class="app-shell" data-screen="intro">
      <header class="top-bar">
        <div class="program-title">
          <span class="title-main">
            pointer<span class="exe">.exe</span>
          </span>
          <span class="tagline">welcome back, signal seeker</span>
        </div>
        <div class="session-indicator">
          <span class="label">session</span>
          <span class="value" id="session-label">000</span>
        </div>
        <button class="glitch-button" data-action="flashlight" type="button">
          flashlight
          <span class="flashlight-hint">press F</span>
          <span id="flashlight-indicator" class="flashlight-indicator">ready</span>
        </button>
        <button class="glitch-button ghost" data-action="preferences" type="button">
          preferences
        </button>
      </header>

      <main class="main-pane">
        <section id="intro-screen" class="panel active">
          <div class="intro-copy">
            <h1>boot sector // anomaly</h1>
            <p>
              caretaker logs recovered with <span class="missing">segments missing</span>.
              fragments hint at an echo following every intention. initialize the
              trace, let the ghost pointer learn your pace, and rebuild the record.
            </p>
            <p class="hint">note: the log redacts <span class="missing">three truths</span>. each level reveals one.</p>
          </div>
          <div class="intro-actions">
            <button class="glitch-button primary" data-action="start" type="button">
              boot the trace
            </button>
            <button class="glitch-button" data-action="open-lore" type="button">
              read prologue fragment
            </button>
          </div>
          <article class="prologue hidden" id="prologue">
            <header>fragment log // prologue</header>
            <p>
              [001] pointer.exe observed hand movements, rewound them, and wrote a
              manual. page 3 is <span class="missing">missing</span>. whoever tore it out left
              a thumbprint of light.
            </p>
          </article>
        </section>

        <section id="level-screen" class="panel hidden">
          <div class="level-header">
            <div>
              <h2 id="level-title">level 00</h2>
              <p id="room-label" class="room-label">awaiting input...</p>
            </div>
            <div class="progress">
              <span class="label">progress</span>
              <span class="value" id="progress-label">0/0</span>
            </div>
          </div>

          <section class="level-body">
            <article class="level-lore">
              <header>lore buffer</header>
              <p id="level-lore">The archive waits.</p>
              <ul id="fragment-list" class="fragment-list"></ul>
            </article>

            <section class="exploration">
              <header>
                <span id="exploration-label">trace map</span>
                <span id="watcher-label" class="watcher-label">signal steady</span>
              </header>
              <div class="exploration-stage" id="legacy-stage">
                <div id="map-area" class="map-area" role="application" aria-live="polite"></div>
              </div>
              <div class="exploration-stage hidden" id="atelier-stage" aria-hidden="true">
                <div
                  id="atelier-interface"
                  class="atelier-interface"
                  role="application"
                  aria-live="polite"
                ></div>
              </div>
              <div class="exploration-stage hidden" id="gauntlet-stage" aria-hidden="true">
                <div
                  id="gauntlet-interface"
                  class="gauntlet-interface"
                  role="application"
                  aria-live="polite"
                ></div>
              </div>
              <p id="status-line" class="status-line">trace the map. the archive listens.</p>
            </section>
          </section>

          <section id="final-revelation" class="final-revelation hidden">
            <header>final log // reconstructed</header>
            <p id="final-text"></p>
            <button class="glitch-button primary" id="final-puzzle-button" type="button">
              engage ascension seal
            </button>
          </section>
        </section>

        <section id="thank-you-screen" class="panel hidden">
          <div class="thank-you">
            <h2>signal stabilized // thank you</h2>
            <p>
              The archive closes its eyes for a moment and logs your presence as a
              promise. Every pulse you offered tonight folds into the next build.
            </p>
            <p>
              Thank you for lending your focus to this early prototype. More
              corridors, more whispers, and more light are already assembling for
              you.
            </p>
            <button class="glitch-button primary" data-action="restart-run" type="button">
              reinitialize pointer.exe
            </button>
          </div>
        </section>
      </main>
    </div>

    <div id="settings-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header class="modal-header">
          <div>
            <h2>system preferences</h2>
            <p>toggle behaviors grafted to the session. switches ripple with intent.</p>
          </div>
          <button class="glitch-button ghost" data-action="close-settings" type="button" aria-label="Close settings">
            ✕
          </button>
        </header>
        <div class="modal-body">
          <div class="settings-option">
            <span class="option-label">ghost pointer trace</span>
            <label class="glitch-switch">
              <input type="checkbox" id="pointer-switch" checked />
              <span class="switch-rail">
                <span class="switch-thumb"></span>
              </span>
              <span class="switch-caption" data-on="on" data-off="off"></span>
            </label>
          </div>
          <div class="settings-option">
            <span class="option-label">ambient static wash</span>
            <label class="glitch-switch">
              <input type="checkbox" id="static-switch" checked />
              <span class="switch-rail">
                <span class="switch-thumb"></span>
              </span>
              <span class="switch-caption" data-on="on" data-off="off"></span>
            </label>
          </div>
          <div class="settings-option volume-option">
            <div class="option-meta">
              <label for="volume-slider" class="option-label">signal volume</label>
              <span id="volume-value" class="volume-value">80%</span>
            </div>
            <div class="slider-shell">
              <input
                type="range"
                id="volume-slider"
                class="volume-slider"
                min="0"
                max="100"
                step="1"
                value="80"
                aria-describedby="volume-value"
              />
            </div>
          </div>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="apply-settings" type="button">
            resume trace
          </button>
        </footer>
      </div>
    </div>

    <div id="encounter-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content encounter">
        <header class="modal-header">
          <div>
            <h2 id="encounter-title">entity log</h2>
            <p id="encounter-entity">classification pending...</p>
          </div>
          <button class="glitch-button ghost" data-action="close-encounter" type="button" aria-label="Close encounter">
            ✕
          </button>
        </header>
        <div class="modal-body">
          <p id="encounter-text"></p>
          <div
            id="encounter-choices"
            class="encounter-choices hidden"
            role="group"
            aria-live="polite"
          ></div>
          <p id="encounter-feedback" class="encounter-feedback hidden"></p>
          <p id="encounter-fragment" class="encounter-fragment"></p>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="acknowledge-encounter" type="button">
            acknowledge
          </button>
        </footer>
      </div>
    </div>

    <div id="death-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header class="modal-header">
          <div>
            <h2>signal terminated</h2>
            <p id="death-cause">the archive was displeased.</p>
          </div>
        </header>
        <div class="modal-body">
          <p>the trace collapses, but the log remains. the caretaker expects another attempt.</p>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="restart-level" type="button">
            reinitialize level
          </button>
        </footer>
      </div>
    </div>

    <div id="shortage-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content shortage">
        <header class="modal-header">
          <div>
            <h2>auxiliary power reroute</h2>
            <p id="shortage-status">grid offline. trace lines flicker.</p>
          </div>
        </header>
        <div class="modal-body">
          <p id="shortage-description">connect the relay sigils in order to restore the current.</p>
          <div id="shortage-puzzle" class="shortage-puzzle" role="group"></div>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button ghost" data-action="abort-shortage" type="button">
            stand in the dark
          </button>
        </footer>
      </div>
    </div>

    <div id="stalker-overlay" class="modal hidden" role="alertdialog" aria-modal="true">
      <div class="modal-content stalker">
        <header class="modal-header">
          <div>
            <h2>hostile presence</h2>
            <p>an umbral hitcher leans in. guide the beam with your cursor and hold it steady.</p>
          </div>
        </header>
        <div class="modal-body stalker-body">
          <p id="stalker-warning">hold steady. the entity waits for the light.</p>
          <div id="stalker-field" class="stalker-field" role="presentation">
            <div id="stalker-entity" class="stalker-entity" aria-hidden="true"></div>
          </div>
          <p class="stalker-instruction">Move your cursor to bathe the hitcher in light and keep it there.</p>
          <div
            id="stalker-progress"
            class="stalker-progress"
            role="progressbar"
            aria-label="flashlight focus"
            aria-valuemin="0"
            aria-valuemax="100"
            aria-valuenow="0"
          >
            <div class="stalker-progress-bar"></div>
          </div>
        </div>
      </div>
    </div>

    <div id="final-puzzle-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content final-puzzle">
        <header class="modal-header">
          <div>
            <h2>ascension seal</h2>
            <p>arrange the caretaker sigils into the vow that keeps the archive open.</p>
          </div>
          <button class="glitch-button ghost" data-action="abort-final-puzzle" type="button" aria-label="Abort final puzzle">
            ✕
          </button>
        </header>
        <div class="modal-body">
          <div id="final-puzzle-container" class="final-puzzle-container" role="application"></div>
        </div>
      </div>
    </div>

    <div id="tutorial-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content tutorial">
        <header class="modal-header">
          <div>
            <h2>session orientation</h2>
            <p>learn how the archive tests your focus.</p>
          </div>
        </header>
        <div class="modal-body tutorial-body">
          <ol class="tutorial-list">
            <li>
              <strong>Flashlight control</strong> — press <kbd>F</kbd> to toggle the beam. Keeping it on for more than five seconds
              will burn the circuit, freezing your cursor for ten seconds and disabling the light for forty.
            </li>
            <li>
              <strong>Power bleed events</strong> — if the lights flicker, hold <kbd>H</kbd> to shut your eyes. Keep them closed for
              five seconds to outlast the surge. Ignore it for eight seconds and the archive will terminate the run.
            </li>
            <li>
              <strong>Intrusive echoes</strong> — dimming air and a grey pointer mean a hostile entity is near. Bathe it in your
              flashlight for two seconds to banish it before ten seconds pass.
            </li>
          </ol>
          <p class="tutorial-tip">You can call the tutorial again from the session menu after you restart.</p>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" id="tutorial-dismiss" type="button">begin trace</button>
        </footer>
      </div>
    </div>

    <div id="version-counter" class="version-counter" aria-hidden="true">v0.4.002</div>

    <audio id="intro-audio" src="files/introVoice.mp3" preload="auto"></audio>
    <audio id="main-menu-audio" src="files/mainMenuOST.mp3" loop preload="auto"></audio>
    <audio id="shortage-audio" src="files/shortage.mp3" preload="auto" loop></audio>
    <audio id="shortage-ost" src="files/shortageOST.mp3" preload="auto" loop></audio>
    <audio id="lights-out-audio" src="files/lightsOutOST.mp3" preload="auto" loop></audio>
    <audio id="flicker-audio" src="files/flickering.mp3" preload="auto"></audio>
    <audio id="entity-spawn-audio" src="files/entitySpawn.mp3" preload="auto"></audio>
    <audio id="entity-kill-audio" src="files/entityKill.mp3" preload="auto"></audio>
    <audio id="flash-on-audio" src="files/flashOn.mp3" preload="auto"></audio>
    <audio id="flash-off-audio" src="files/flashOff.mp3" preload="auto"></audio>
    <audio id="flash-broken-audio" src="files/flashBroken.mp3" preload="auto"></audio>
    <audio id="flash-repaired-audio" src="files/flashRepaired.mp3" preload="auto"></audio>

    <script src="script.js"></script>
  </body>
</html>
