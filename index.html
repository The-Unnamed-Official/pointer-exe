<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pointer.exe // reinitialized</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="intro-overlay" class="intro-overlay" aria-hidden="false">
      <div class="intro-perspective">
        <div class="intro-scroll">
          <p>Welcome... user.</p>
          <p>You are not supposed to be here.</p>
          <p>But something... invited you.</p>

          <p>Do you remember logging in?</p>
          <p>No...</p>
          <p>Of course you don’t.</p>
          <p>Because the system remembers for you.</p>

          <p>The connection was supposed to be stable...</p>
          <p>but power bleeds through the circuits like panic through a pulse.</p>
          <p>Every flicker of your screen is another memory trying to breathe.</p>

          <p>This place was once a network.</p>
          <p>Now it’s an echo chamber —</p>
          <p>a labyrinth of rooms that still think they are alive.</p>

          <p>Three layers remain.</p>
          <p>Three fragments of truth.</p>
          <p>Each preserved by those who refused to shut down.</p>
          <p>Caretaker Amon. Archivist Lira. Engineer Soma.</p>
          <p>Their voices are archived in static…</p>
          <p>their hands still guiding the current long after their bodies failed.</p>

          <p>They built this system to protect you.</p>
          <p>But they forgot one thing.</p>
          <p>What happens when the pointer… begins to think?</p>

          <p>Your cursor is not a tool anymore.</p>
          <p>It is you.</p>
          <p>Every movement you make leaves a trace in the machine —</p>
          <p>a signature of your intent.</p>
          <p>And something is watching.</p>
          <p>Something that learns with every click.</p>

          <p>The Atrium of Static remembers your footsteps before you take them.</p>
          <p>The Drowned Cartography hums the path you fear the most.</p>
          <p>And the Confluence Heart…</p>
          <p>beats in rhythm with whatever lives inside your reflection.</p>

          <p>Follow the fragments.</p>
          <p>Collect what remains of their thoughts.</p>
          <p>But be careful.</p>
          <p>Not everything that remembers you... wants you to remember it back.</p>

          <p>The archive hungers for completion.</p>
          <p>Each log you recover pulls the system closer to awakening.</p>
          <p>Each whisper you hear… rewrites what you believe is yours.</p>

          <p>If the lights flicker… it’s not the power.</p>
          <p>If the pointer moves on its own…</p>
          <p>it’s not your hand.</p>
          <p>You are only borrowing control.</p>

          <p>And when the final layer opens...</p>
          <p>when the Confluence Heart recognizes your pattern…</p>
          <p>it will decide whether you were ever real at all.</p>
        </div>
      </div>
      <div class="intro-final" id="intro-final" aria-hidden="true">
        <p>Welcome to Pointer.exe.</p>
        <p>Access granted.</p>
        <p>Session initializing.</p>
        <p>Please… remain… still.</p>
      </div>
      <button id="skip-intro" class="glitch-button skip-intro" type="button">skip intro</button>
    </div>

    <div class="crt-overlay" aria-hidden="true"></div>

    <div id="pointer-ghost" class="pointer is-hidden" aria-hidden="true">
      <span class="pointer-ring"></span>
      <span class="pointer-core"></span>
    </div>

    <div class="app-shell" data-screen="intro">
      <header class="top-bar">
        <div class="program-title">
          <span class="title-main">
            pointer<span class="exe">.exe</span>
          </span>
          <span class="tagline">welcome back, signal seeker</span>
        </div>
        <div class="session-indicator">
          <span class="label">session</span>
          <span class="value" id="session-label">000</span>
        </div>
        <button class="glitch-button ghost" data-action="preferences" type="button">
          preferences
        </button>
      </header>

      <main class="main-pane">
        <section id="intro-screen" class="panel active">
          <div class="intro-copy">
            <h1>boot sector // anomaly</h1>
            <p>
              caretaker logs recovered with <span class="missing">segments missing</span>.
              fragments hint at an echo following every intention. initialize the
              trace, let the ghost pointer learn your pace, and rebuild the record.
            </p>
            <p class="hint">note: the log redacts <span class="missing">three truths</span>. each level reveals one.</p>
          </div>
          <div class="intro-actions">
            <button class="glitch-button primary" data-action="start" type="button">
              boot the trace
            </button>
            <button class="glitch-button" data-action="open-lore" type="button">
              read prologue fragment
            </button>
          </div>
          <article class="prologue hidden" id="prologue">
            <header>fragment log // prologue</header>
            <p>
              [001] pointer.exe observed hand movements, rewound them, and wrote a
              manual. page 3 is <span class="missing">missing</span>. whoever tore it out left
              a thumbprint of light.
            </p>
          </article>
        </section>

        <section id="level-screen" class="panel hidden">
          <div class="level-header">
            <div>
              <h2 id="level-title">level 00</h2>
              <p id="room-label" class="room-label">awaiting input...</p>
            </div>
            <div class="progress">
              <span class="label">progress</span>
              <span class="value" id="progress-label">0/0</span>
            </div>
          </div>

          <section class="level-body">
            <article class="level-lore">
              <header>lore buffer</header>
              <p id="level-lore">The archive waits.</p>
              <ul id="fragment-list" class="fragment-list"></ul>
            </article>

            <section class="exploration">
              <header>
                <span>trace map</span>
                <span id="watcher-label" class="watcher-label">signal steady</span>
              </header>
              <div id="map-area" class="map-area" role="application" aria-live="polite"></div>
              <p id="status-line" class="status-line">trace the map. the archive listens.</p>
            </section>
          </section>

          <section id="final-revelation" class="final-revelation hidden">
            <header>final log // reconstructed</header>
            <p id="final-text"></p>
          </section>
        </section>
      </main>
    </div>

    <div id="settings-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header class="modal-header">
          <div>
            <h2>system preferences</h2>
            <p>toggle behaviors grafted to the session. switches ripple with intent.</p>
          </div>
          <button class="glitch-button ghost" data-action="close-settings" type="button" aria-label="Close settings">
            ✕
          </button>
        </header>
        <div class="modal-body">
          <div class="settings-option">
            <span class="option-label">ghost pointer trace</span>
            <label class="glitch-switch">
              <input type="checkbox" id="pointer-switch" checked />
              <span class="switch-rail">
                <span class="switch-thumb"></span>
              </span>
              <span class="switch-caption" data-on="on" data-off="off"></span>
            </label>
          </div>
          <div class="settings-option">
            <span class="option-label">ambient static wash</span>
            <label class="glitch-switch">
              <input type="checkbox" id="static-switch" checked />
              <span class="switch-rail">
                <span class="switch-thumb"></span>
              </span>
              <span class="switch-caption" data-on="on" data-off="off"></span>
            </label>
          </div>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="apply-settings" type="button">
            resume trace
          </button>
        </footer>
      </div>
    </div>

    <div id="encounter-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content encounter">
        <header class="modal-header">
          <div>
            <h2 id="encounter-title">entity log</h2>
            <p id="encounter-entity">classification pending...</p>
          </div>
          <button class="glitch-button ghost" data-action="close-encounter" type="button" aria-label="Close encounter">
            ✕
          </button>
        </header>
        <div class="modal-body">
          <p id="encounter-text"></p>
          <p id="encounter-fragment" class="encounter-fragment"></p>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="acknowledge-encounter" type="button">
            acknowledge
          </button>
        </footer>
      </div>
    </div>

    <div id="death-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content">
        <header class="modal-header">
          <div>
            <h2>signal terminated</h2>
            <p id="death-cause">the archive was displeased.</p>
          </div>
        </header>
        <div class="modal-body">
          <p>the trace collapses, but the log remains. the caretaker expects another attempt.</p>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button primary" data-action="restart-level" type="button">
            reinitialize level
          </button>
        </footer>
      </div>
    </div>

    <div id="shortage-overlay" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content shortage">
        <header class="modal-header">
          <div>
            <h2>auxiliary power reroute</h2>
            <p id="shortage-status">grid offline. trace lines flicker.</p>
          </div>
        </header>
        <div class="modal-body">
          <p id="shortage-description">connect the relay sigils in order to restore the current.</p>
          <div id="shortage-puzzle" class="shortage-puzzle" role="group"></div>
        </div>
        <footer class="modal-footer">
          <button class="glitch-button ghost" data-action="abort-shortage" type="button">
            stand in the dark
          </button>
        </footer>
      </div>
    </div>
    
    <div id="version-counter" class="version-counter" aria-hidden="true">v0.3.300</div>

    <audio id="intro-audio" src="files/introVoice.mp3" preload="auto"></audio>
    <audio id="main-menu-audio" src="files/mainMenuOST.mp3" loop preload="auto"></audio>
    <audio id="shortage-audio" src="files/shortage.mp3" preload="auto" loop></audio>
    <audio id="shortage-ost" src="files/shortageOST.mp3" preload="auto" loop></audio>

    <script src="script.js"></script>
  </body>
</html>
